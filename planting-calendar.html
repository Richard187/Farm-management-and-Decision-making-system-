<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planting Calendar | AgriSmart Pro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/crop-planning.css">
    <style>
        /* ——— Unified Green Planting Calendar Styling - Single Color Theme ——— */
        :root{
            --bg1:#0a1f17;          /* deep forest green - maximum contrast */
            --bg2:#031008;          /* very dark green - optimal for projection */
            --brand-green:#28a745;  /* unified brand green - single color theme */
            --brand-green-light:#34ce57; /* lighter brand green */
            --brand-green-dark:#1e7e34; /* darker brand green */
            --card:rgba(10, 31, 23, 0.95); /* forest glass - increased opacity */
            --card-stroke:rgba(40, 167, 69, 0.6); /* brand green stroke */
            --text:#ffffff;         /* pure white - maximum contrast */
            --text-emphasis:#28a745; /* brand green - for emphasis */
            --text-secondary:#a8d5ba; /* light brand green - high visibility */
            --text-muted:#d4edda;   /* very light brand green - readable secondary */
            --text-dark:#155724;    /* dark brand green - for light backgrounds */
            --shadow: 0 15px 50px -10px rgba(0,0,0,0.9);
            --shadow-glow: 0 0 30px rgba(40, 167, 69, 0.4);
            --radius: 20px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Base responsive styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        /* Unified green background */
        body{
            background: linear-gradient(180deg, var(--bg1), var(--bg2));
            color: var(--text);
            overflow-x: hidden;
            min-height: 100vh;
            font-weight: 500;
            line-height: 1.6;
        }

        /* Mobile-first container */
        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 15px;
        }

        /* Enhanced responsive header */
        header{
            backdrop-filter: blur(15px);
            background: linear-gradient(180deg, rgba(10, 31, 23, 0.9), rgba(3, 16, 8, 0.7));
            border-bottom: 2px solid var(--brand-green);
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.5);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            flex-wrap: wrap;
            gap: 15px;
        }

        header .logo{
            display: flex;
            align-items: center;
            gap: .8rem;
            padding: .6rem 1rem;
            border-radius: 999px;
            background: var(--brand-green);
            border: 2px solid var(--brand-green-light);
            transition: var(--transition);
            box-shadow: 0 4px 20px rgba(40, 167, 69, 0.3);
            color: var(--text);
            font-weight: 600;
            text-shadow: 0 2px 4px rgba(0,0,0,0.8);
            text-decoration: none;
            font-size: 1.5rem;
        }

        header .logo:hover{ 
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 8px 30px rgba(40, 167, 69, 0.4);
            background: var(--brand-green-light);
        }

        /* Mobile navigation */
        nav {
            flex: 1;
            min-width: 0;
        }

        nav > ul {
            display: flex;
            list-style: none;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            margin: 0;
            padding: 0;
        }

        nav .nav-link{ 
            color: var(--text);
            font-weight: 600;
            transition: var(--transition);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.8);
            font-size: 0.9rem;
            text-decoration: none;
            display: inline-block;
            white-space: nowrap;
        }

        nav .nav-link:hover{ 
            color: var(--text-emphasis);
            background: rgba(40, 167, 69, 0.15);
            transform: translateY(-1px);
            text-shadow: 0 2px 4px rgba(40, 167, 69, 0.3);
        }

        /* Dropdown menu styles */
        .dropdown {
            position: relative;
        }

        .dropdown-menu {
            background: rgba(3, 16, 8, 0.98);
            border: 2px solid var(--brand-green);
            box-shadow: var(--shadow);
            backdrop-filter: blur(12px);
            border-radius: 12px;
            padding: 0.5rem;
            min-width: 200px;
            position: absolute;
            top: 100%;
            left: 0;
            z-index: 1001;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }

        .dropdown:hover .dropdown-menu {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown-menu a { 
            color: var(--text);
            padding: 0.7rem 1rem;
            border-radius: 8px;
            transition: var(--transition);
            font-weight: 500;
            text-shadow: 0 1px 2px rgba(0,0,0,0.8);
            text-decoration: none;
            display: block;
        }

        .dropdown-menu a:hover {
            background: rgba(40, 167, 69, 0.2);
            color: var(--text-emphasis);
            text-shadow: 0 2px 4px rgba(40, 167, 69, 0.3);
        }

        /* User actions */
        .user-actions {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }

        /* Unified section headers */
        .page-content {
            padding: 2rem 0;
        }

        .page-content .section-title {
            display: inline-flex;
            align-items: center;
            gap: .8rem;
            padding: 1rem 1.5rem;
            border-radius: 16px;
            background: var(--brand-green);
            border: 2px solid var(--brand-green-light);
            box-shadow: inset 0 1px 0 rgba(255,255,255,.1), 0 8px 25px rgba(0,0,0,0.3);
            font-size: clamp(1.2rem, 4vw, 1.8rem);
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--text);
            text-shadow: 0 2px 4px rgba(0,0,0,0.8);
            width: 100%;
            justify-content: center;
            text-align: center;
        }

        .page-content .section-subtitle {
            color: var(--text);
            font-size: clamp(0.9rem, 2.5vw, 1.2rem);
            margin-bottom: 2rem;
            text-align: center;
            font-weight: 600;
            text-shadow: 0 2px 4px rgba(0,0,0,0.8);
            padding: 0 15px;
        }

        /* Unified cards */
        .planning-cards {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-top: 2rem;
        }

        .plan-card {
            background: var(--card);
            border: 2px solid var(--card-stroke);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
            isolation: isolate;
            transition: var(--transition);
            backdrop-filter: blur(15px);
            padding: 1.5rem;
        }

        .plan-card:hover {
            border-color: var(--brand-green-light);
            box-shadow: var(--shadow-glow), var(--shadow);
            transform: translateY(-5px);
        }

        .plan-card h3 {
            margin: 0 0 12px 0;
            display: flex;
            align-items: center;
            gap: .8rem;
            letter-spacing: .5px;
            font-size: clamp(1.1rem, 3vw, 1.5rem);
            font-weight: 700;
            color: var(--text-emphasis);
            text-shadow: 0 2px 4px rgba(0,0,0,0.8);
        }

        .plan-card p {
            color: var(--text-secondary);
            font-weight: 500;
            line-height: 1.6;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
            margin-bottom: 1rem;
        }

        /* Unified form controls */
        .crop-selector {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            align-items: end;
            margin-bottom: 2rem;
        }

        .crop-selector label {
            color: var(--text);
            font-size: clamp(0.8rem, 2vw, 1rem);
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: block;
            text-shadow: 0 2px 4px rgba(0,0,0,0.8);
        }

        .crop-selector select {
            appearance: none;
            width: 100%;
            padding: 0.8rem 2.5rem 0.8rem 1rem;
            color: var(--text);
            background: var(--brand-green-dark);
            border: 2px solid var(--brand-green);
            border-radius: 12px;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.3), 0 4px 8px rgba(0,0,0,0.2);
            transition: var(--transition);
            font-size: clamp(0.8rem, 2vw, 1rem);
            font-weight: 600;
            text-shadow: 0 1px 2px rgba(0,0,0,0.8);
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23ffffff' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.7rem center;
            background-repeat: no-repeat;
            background-size: 1.2rem;
        }

        .crop-selector select:focus {
            outline: none;
            border-color: var(--brand-green-light);
            box-shadow: 0 0 0 4px rgba(40, 167, 69, 0.3), inset 0 2px 4px rgba(0,0,0,0.3);
            transform: translateY(-2px);
        }

        .crop-selector select:hover {
            border-color: var(--brand-green-light);
            background: var(--brand-green);
        }

        /* Unified buttons */
        .btn {
            border-radius: 12px !important;
            border: 2px solid var(--brand-green) !important;
            text-transform: none;
            letter-spacing: .5px;
            font-weight: 700 !important;
            padding: 0.8rem 1.5rem !important;
            transition: var(--transition) !important;
            box-shadow: 0 6px 20px rgba(0,0,0,0.3) !important;
            text-shadow: 0 2px 4px rgba(0,0,0,0.8) !important;
            cursor: pointer;
            font-size: clamp(0.8rem, 2vw, 1rem) !important;
            white-space: nowrap;
        }

        .btn-primary {
            background: var(--brand-green) !important;
            color: var(--text) !important;
            box-shadow: 0 8px 30px rgba(40, 167, 69, 0.4) !important;
        }

        .btn-primary:hover {
            background: var(--brand-green-light) !important;
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 12px 40px rgba(40, 167, 69, 0.5) !important;
            border-color: var(--brand-green-light) !important;
        }

        .btn-primary:active { 
            transform: translateY(-1px) scale(0.98);
        }

        .btn-outline {
            background: transparent !important;
            color: var(--brand-green) !important;
            border-color: var(--brand-green) !important;
        }

        .btn-outline:hover {
            background: var(--brand-green) !important;
            color: var(--text) !important;
        }

        /* Unified planting results */
        .planting-dates {
            margin-top: 1.5rem;
            padding: 1.5rem;
            border-radius: 16px;
            background: var(--card);
            border: 2px solid var(--card-stroke);
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.3), 0 8px 25px rgba(0,0,0,0.2);
        }

        .date-result h4 {
            margin-top: 0;
            margin-bottom: 1rem;
            display: inline-flex;
            align-items: center;
            gap: .8rem;
            color: var(--text-emphasis);
            font-size: clamp(1rem, 2.5vw, 1.3rem);
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.8);
        }

        .date-result p {
            margin: .8rem 0;
            font-size: clamp(0.9rem, 2vw, 1.1rem);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            background: rgba(0,0,0,0.4);
            border-left: 4px solid var(--brand-green);
            transition: var(--transition);
            font-weight: 600;
            text-shadow: 0 2px 4px rgba(0,0,0,0.8);
            color: var(--text);
        }

        .date-result p:hover {
            transform: translateX(5px);
            background: rgba(0,0,0,0.5);
        }

        /* Unified guidelines */
        .guidelines {
            display: grid;
            gap: 15px;
        }

        .guideline-item {
            display: grid;
            grid-template-columns: 50px 1fr;
            gap: 15px;
            padding: 1.2rem;
            border: 2px solid var(--card-stroke);
            border-radius: 12px;
            background: var(--card);
            transition: var(--transition);
            backdrop-filter: blur(8px);
        }

        .guideline-item i {
            color: var(--text-emphasis);
            display: grid;
            place-items: center;
            font-size: clamp(1.2rem, 3vw, 1.5rem);
            background: var(--brand-green);
            border-radius: 50%;
            width: clamp(40px, 8vw, 50px);
            height: clamp(40px, 8vw, 50px);
            border: 2px solid var(--brand-green-light);
            text-shadow: 0 2px 4px rgba(0,0,0,0.8);
        }

        .guideline-item:hover {
            transform: translateY(-3px) scale(1.02);
            border-color: var(--brand-green-light);
            box-shadow: 0 20px 40px -20px rgba(40, 167, 69, 0.5);
        }

        .guideline-item h4 {
            color: var(--text-emphasis);
            margin-bottom: 0.5rem;
            font-size: clamp(0.9rem, 2.5vw, 1.2rem);
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.8);
        }

        .guideline-item p {
            color: var(--text);
            line-height: 1.6;
            margin: 0;
            font-weight: 500;
            text-shadow: 0 1px 2px rgba(0,0,0,0.8);
            font-size: clamp(0.8rem, 2vw, 1rem);
        }

        /* Unified footer */
        footer {
            background: linear-gradient(180deg, rgba(10, 31, 23, 0.4), rgba(3, 16, 8, 0.9));
            border-top: 2px solid var(--brand-green);
            margin-top: 4rem;
            padding: 2rem 0;
        }

        footer .copyright { 
            color: var(--text); 
            font-size: clamp(0.8rem, 2vw, 1rem);
            font-weight: 500;
            text-shadow: 0 2px 4px rgba(0,0,0,0.8);
            text-align: center;
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: clamp(16px, 3vw, 20px);
            height: clamp(16px, 3vw, 20px);
            border: 3px solid rgba(40, 167, 69, 0.3);
            border-radius: 50%;
            border-top-color: var(--brand-green);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Motion safety */
        @media (prefers-reduced-motion: reduce) {
            *{ animation: none !important; transition: none !important; }
        }

        /* Additional projection-friendly styles */
        * {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* High contrast mode support */
        @media (prefers-contrast: high) {
            :root {
                --text:#ffffff;
                --text-emphasis:#28a745;
                --card-stroke:rgba(40, 167, 69, 0.8);
            }
        }

        /* Tablet styles (768px - 1024px) */
        @media (min-width: 768px) {
            .container {
                padding: 0 20px;
            }

            .header-container {
                flex-wrap: nowrap;
                gap: 20px;
            }

            nav > ul {
                gap: 20px;
                flex-wrap: nowrap;
            }

            nav .nav-link {
                font-size: 1rem;
            }

            .planning-cards {
                grid-template-columns: 1fr;
                gap: 25px;
            }

            .crop-selector {
                grid-template-columns: 1fr 1fr auto;
                gap: 20px;
                align-items: end;
            }

            .page-content .section-title {
                width: auto;
                justify-content: flex-start;
                text-align: left;
            }

            .page-content .section-subtitle {
                padding: 0;
            }
        }

        /* Desktop styles (1024px+) */
        @media (min-width: 1024px) {
            .container {
                padding: 0 30px;
            }

            .planning-cards {
                grid-template-columns: 7fr 5fr;
                gap: 30px;
            }

            .plan-card {
                padding: 2rem;
            }

            .crop-selector {
                grid-template-columns: 1fr 1fr auto;
            }
        }

        /* Large desktop styles (1400px+) */
        @media (min-width: 1400px) {
            .container {
                padding: 0 40px;
            }

            .planning-cards {
                gap: 40px;
            }
        }

        /* Small mobile styles (480px and below) */
        @media (max-width: 480px) {
            .header-container {
                flex-direction: column;
                text-align: center;
            }

            nav > ul {
                flex-direction: column;
                gap: 10px;
                width: 100%;
            }

            .user-actions {
                width: 100%;
                justify-content: center;
            }

            .btn {
                width: 100%;
                max-width: 200px;
            }

            .plan-card {
                padding: 1rem;
            }

            .planting-dates {
                padding: 1rem;
            }

            .guideline-item {
                grid-template-columns: 1fr;
                text-align: center;
                gap: 10px;
            }

            .guideline-item i {
                margin: 0 auto;
            }
        }

        /* Ultra-small mobile styles (360px and below) */
        @media (max-width: 360px) {
            .container {
                padding: 0 10px;
            }

            .page-content .section-title {
                padding: 0.8rem 1rem;
                font-size: 1.1rem;
            }

            .plan-card {
                padding: 0.8rem;
            }

            .crop-selector select {
                padding: 0.7rem 2rem 0.7rem 0.8rem;
            }
        }

        /* Print styles */
        @media print {
            body {
                background: white !important;
                color: black !important;
            }

            .plan-card {
                background: white !important;
                border: 1px solid #ccc !important;
                box-shadow: none !important;
                break-inside: avoid;
            }

            .btn {
                display: none !important;
            }
        }

        /* Focus styles for accessibility */
        .btn:focus,
        select:focus,
        a:focus {
            outline: 2px solid var(--brand-green);
            outline-offset: 2px;
        }

        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-container">
                <a href="index.html" class="logo">
                    <span class="logo-text">AgroAxis</span>
                    <i class="fas fa-seedling"></i>
                </a>
                <nav>
                    <ul>
                        <li><a href="index.html" class="nav-link">Home</a></li>
                        <li class="dropdown">
                            <a href="crop-planning.html" class="nav-link dropdown-toggle">Crop Planning <i class="fas fa-plus"></i></a>
                            <ul class="dropdown-menu">
                                <li><a href="planting-calendar.html"><i class="fas fa-calendar-alt"></i> Planting Calendar</a></li>
                                <li><a href="irrigation-schedule.html"><i class="fas fa-tint"></i> Irrigation Schedule</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="livestock.html" class="nav-link dropdown-toggle">Livestock <i class="fas fa-plus"></i></a>
                            <ul class="dropdown-menu">
                                <li><a href="dairy-cattle.html"><i class="fas fa-cow"></i> Dairy Cattle Management</a></li>
                                <li><a href="poultry-management.html"><i class="fas fa-egg"></i> Poultry Management</a></li>
                                <li><a href="swine-management.html"><i class="fas fa-piggy-bank"></i> Swine Management</a></li>
                                <li><a href="vaccination-schedule.html"><i class="fas fa-syringe"></i> Vaccination Schedule</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="finance.html" class="nav-link dropdown-toggle">Finance <i class="fas fa-plus"></i></a>
                            <ul class="dropdown-menu">
                                <li><a href="investment-calculator.html"><i class="fas fa-calculator"></i> Investment Calculator</a></li>
                            </ul>
                        </li>
                        <li><a href="weather.html" class="nav-link">Weather</a></li>
                        <li><a href="market.html" class="nav-link">Market</a></li>
                    </ul>
                </nav>
                <div class="user-actions">
                    <button class="btn btn-outline" onclick="openLoginModal()"><i class="fas fa-sign-in-alt"></i> Login</button>
                    <button class="btn btn-primary" onclick="location.href='signup.html'"><i class="fas fa-user-plus"></i> Sign Up</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Planting Calendar Content -->
    <section class="page-content">
        <div class="container">
            <h2 class="section-title"><i class="fas fa-calendar-alt"></i> Planting Calendar</h2>
            <p class="section-subtitle">Optimal planting dates based on your location, soil conditions, and weather forecasts</p>
            
            <div class="planning-cards">
                <div class="plan-card">
                    <h3><i class="fas fa-calendar-alt"></i> Optimal Planting Dates</h3>
                    <p>Select your crop type and location to get personalized planting recommendations</p>
                    <div class="crop-selector">
                        <div>
                            <label for="cropType">Crop Type:</label>
                            <select id="cropType">
                                <option value="tomato">Tomatoes</option>
                                <option value="corn">Corn</option>
                                <option value="wheat">Wheat</option>
                                <option value="soybean">Soybeans</option>
                                <option value="potato">Potatoes</option>
                                <option value="carrot">Carrots</option>
                            </select>
                        </div>
                        <div>
                            <label for="location">Location:</label>
                            <select id="location">
                                <option value="temperate">Temperate Climate</option>
                                <option value="tropical">Tropical Climate</option>
                                <option value="arid">Arid Climate</option>
                                <option value="mediterranean">Mediterranean Climate</option>
                            </select>
                        </div>
                        <button class="btn btn-primary" onclick="calculatePlantingDate()">
                            <i class="fas fa-calculator"></i> Calculate Best Dates
                        </button>
                    </div>
                    <div class="planting-dates" id="plantingDates">
                        <div class="date-result">
                            <h4><i class="fas fa-seedling"></i> Recommended Planting Window</h4>
                            <p><strong>Early Start:</strong> <span id="earlyDate">-</span></p>
                            <p><strong>Optimal Period:</strong> <span id="optimalDate">-</span></p>
                            <p><strong>Latest Safe:</strong> <span id="lateDate">-</span></p>
                        </div>
                    </div>
                </div>
                
                <div class="plan-card">
                    <h3><i class="fas fa-info-circle"></i> Planting Guidelines</h3>
                    <div class="guidelines">
                        <div class="guideline-item">
                            <i class="fas fa-thermometer-half"></i>
                            <div>
                                <h4>Soil Temperature</h4>
                                <p>Ensure soil temperature is above 50°F for most crops. Use a soil thermometer for accurate readings.</p>
                            </div>
                        </div>
                        <div class="guideline-item">
                            <i class="fas fa-cloud-sun"></i>
                            <div>
                                <h4>Weather Conditions</h4>
                                <p>Plant during favorable weather windows to ensure good germination. Avoid planting before heavy rains.</p>
                            </div>
                        </div>
                        <div class="guideline-item">
                            <i class="fas fa-seedling"></i>
                            <div>
                                <h4>Seed Quality</h4>
                                <p>Use certified seeds with high germination rates. Check seed viability and storage conditions.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <div class="copyright">
                &copy; <span id="copyrightYear">2023</span> AgriSmart Pro. All rights reserved.
            </div>
        </div>
    </footer>

    <script src="javascript/main.js"></script>
    <script src="javascript/auth.js"></script>
    <script src="javascript/crop-planning.js"></script>
    <script>
        // Update footer year to current year
        (function(){
            document.addEventListener('DOMContentLoaded', function(){
                var y = document.getElementById('copyrightYear');
                if (y) y.textContent = new Date().getFullYear();
                
                // Initialize the planting calendar
                if (typeof initPlantingCalendar === 'function') {
                    initPlantingCalendar();
                }
            });
        })();

        // Enhanced planting date calculation with better UX
        function calculatePlantingDate() {
            const cropKey = document.getElementById('cropType')?.value;
            const location = document.getElementById('location')?.value || 'temperate';
            const earlyEl = document.getElementById('earlyDate');
            const optimalEl = document.getElementById('optimalDate');
            const lateEl = document.getElementById('lateDate');
            
            if (!cropKey || !earlyEl || !optimalEl || !lateEl) return;

            // Add loading state
            const button = document.querySelector('button[onclick="calculatePlantingDate()"]');
            const originalText = button.innerHTML;
            button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Calculating...';
            button.disabled = true;

            // Simulate calculation delay for better UX
            setTimeout(() => {
                if (typeof window.calculatePlantingDate === 'function') {
                    // Call the original function from crop-planning.js
                    window.calculatePlantingDate();
                } else {
                    // Fallback calculation
                    const months = ['January', 'February', 'March', 'April', 'May', 'June', 
                                   'July', 'August', 'September', 'October', 'November', 'December'];
                    const currentMonth = new Date().getMonth();
                    
                    let earlyMonth, optimalMonth, lateMonth;
                    
                    switch(location) {
                        case 'tropical':
                            earlyMonth = months[(currentMonth + 2) % 12];
                            optimalMonth = months[(currentMonth + 3) % 12];
                            lateMonth = months[(currentMonth + 4) % 12];
                            break;
                        case 'arid':
                            earlyMonth = months[(currentMonth + 1) % 12];
                            optimalMonth = months[(currentMonth + 2) % 12];
                            lateMonth = months[(currentMonth + 3) % 12];
                            break;
                        case 'mediterranean':
                            earlyMonth = months[(currentMonth + 2) % 12];
                            optimalMonth = months[(currentMonth + 3) % 12];
                            lateMonth = months[(currentMonth + 5) % 12];
                            break;
                        default: // temperate
                            earlyMonth = months[(currentMonth + 2) % 12];
                            optimalMonth = months[(currentMonth + 3) % 12];
                            lateMonth = months[(currentMonth + 4) % 12];
                    }
                    
                    earlyEl.textContent = earlyMonth;
                    optimalEl.textContent = optimalMonth;
                    lateEl.textContent = lateMonth;
                }
                
                // Reset button state
                button.innerHTML = originalText;
                button.disabled = false;
                
                // Add animation to results
                const results = document.querySelector('.date-result');
                results.style.animation = 'fadeIn 0.5s ease';
                
            }, 1000);
        }

        // Add mobile menu toggle functionality
        function toggleMobileMenu() {
            const nav = document.querySelector('nav > ul');
            nav.classList.toggle('mobile-open');
        }

        // Add touch-friendly dropdown handling for mobile
        document.addEventListener('DOMContentLoaded', function() {
            const dropdowns = document.querySelectorAll('.dropdown');
            
            dropdowns.forEach(dropdown => {
                const toggle = dropdown.querySelector('.dropdown-toggle');
                
                // Handle click on mobile
                toggle.addEventListener('click', function(e) {
                    if (window.innerWidth <= 768) {
                        e.preventDefault();
                        dropdown.classList.toggle('mobile-dropdown-open');
                    }
                });
            });
        });
    </script>
</body>
</html>